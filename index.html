<form id="bookingForm" onsubmit="return validateBooking()">
  <label>
    Name:
    <input type="text" name="name" required />
  </label><br/>

  <label>
    Email:
    <input type="email" name="email" required />
  </label><br/>

  <label>
    Date:
    <input type="date" name="date" required />
  </label><br/>

  <label>
    Start Time:
    <input type="time" name="start" required />
  </label><br/>

  <label>
    End Time:
    <input type="time" name="end" required />
  </label><br/>

  <label>
    Notes:
    <textarea name="notes"></textarea>
  </label><br/>

  <button type="submit">Book</button>

  <p id="errorMessage" style="color:red;"></p>
</form>

<script>
  async function validateBooking() {
    const error = document.getElementById('errorMessage');
    const form = document.getElementById('bookingForm');

    const data = {
      name: form.name.value,
      email: form.email.value,
      date: form.date.value,
      start: form.start.value,
      end: form.end.value,
      notes: form.notes.value
    };

    const startMins = toMinutes(data.start);
    const endMins = toMinutes(data.end);

    if (!data.start || !data.end || endMins - startMins < 120) {
      error.textContent = "Please select a valid 2-hour block.";
      return false;
    }

    const response = await fetch("YOUR_GOOGLE_SCRIPT_URL", {
      method: "POST",
      body: JSON.stringify(data),
      headers: { "Content-Type": "application/json" }
    });

    const result = await response.json();

    if (!result.success) {
      error.textContent = result.message;
    } else {
      alert("Booking successful!");
      form.reset();
      error.textContent = "";
    }

    return false;
  }

  function toMinutes(t) {
    const [h, m] = t.split(':').map(Number);
    return h * 60 + m;
  }
</script>

